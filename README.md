# Software Requirements Specification

<iframe src="https://github.com/skhsafarov/UniquenessCheckELMA/blob/master/srs.pdf" width="100%" height="600px"></iframe>

# В контексте DDD (Domain-Driven Design) на C# проекты обычно делят на три ключевые части: Application, Infrastructure, и Domain. Вот краткое описание каждого из них и примеры их содержания:

## 1. Domain (Доменный уровень)

Это сердце приложения, где хранится логика, отражающая предметную область. Сюда относятся все основные правила и поведение, которые важны для бизнеса. Проект Domain независим от других частей и должен избегать зависимостей от внешних библиотек (кроме базовых, если они не затрагивают бизнес-логику).

### Содержание Domain проекта:

Сущности (Entities): классы, которые описывают основные объекты с бизнес-логикой (например, Order, Customer). У них есть идентификаторы и они часто включают методы для выполнения действий.
Значимые объекты (Value Objects): объекты, которые равны, если их свойства равны (например, Money, Address). Они неизменяемы и обычно содержат только данные и методы для работы с ними.
Агрегаты (Aggregates) и Корни агрегатов (Aggregate Roots): агрегаты группируют связанные объекты, а корень агрегата контролирует доступ к ним (например, Order может быть корнем агрегата, а OrderItem — его частью).
Сервисы домена (Domain Services): логика, которая не привязана к конкретной сущности (например, PaymentService).
Интерфейсы репозиториев (Repository Interfaces): абстракции для доступа к данным. Например, IOrderRepository для управления объектами Order.
События домена (Domain Events): события, которые происходят в домене (например, OrderPlaced, ProductStockUpdated), позволяя другим компонентам реагировать на изменения.

---

## 2. Application (Уровень приложения)

Этот слой координирует взаимодействие между Domain и Infrastructure и управляет потоком данных между ними. Здесь реализуются сценарии бизнес-процессов, но не сама бизнес-логика.

### Содержание Application проекта:

Сервисы приложения (Application Services): основные службы, которые содержат бизнес-логику на уровне приложения и координируют операции (например, OrderService для обработки заказов).
Команды и запросы (Commands и Queries): реализация паттернов CQRS (Command and Query Responsibility Segregation), например, CreateOrderCommand и GetCustomerDetailsQuery.
Обработчики команд и запросов (Command Handlers и Query Handlers): обработчики для выполнения команд и запросов. Например, CreateOrderCommandHandler реализует логику создания заказа.
Объекты DTO (Data Transfer Objects): объекты для передачи данных между слоями. Эти объекты используют для того, чтобы предоставить данные в ответах, не раскрывая внутреннюю структуру домена.
Уведомления и взаимодействие с событиями (Event Handlers): обработчики событий для синхронизации других сервисов или доменов.

---

## 3. Infrastructure (Инфраструктурный уровень)
Здесь содержатся реализации, необходимые для работы приложения, но не связанные напрямую с его бизнес-логикой. Этот слой отвечает за доступ к данным, внешние интеграции и другие инфраструктурные задачи.

### Содержание Infrastructure проекта:

Реализации репозиториев (Repository Implementations): классы, которые реализуют доступ к данным (например, OrderRepository), часто взаимодействующие с базами данных через ORM, например, Entity Framework.
Мапперы и преобразования (Mapping и Conversion): инструменты для преобразования сущностей домена в модели данных для базы данных или DTO и обратно.
Сервисы для внешних интеграций: реализация внешних API, например, для платежных систем, отправки уведомлений и т. д.
Управление событиями и шина событий (Event Bus): управление событиями приложения, включая механизмы публикации и подписки.
Настройки и конфигурации: объекты для конфигурации, параметры для доступа к внешним системам и инфраструктурные настройки.
Схема взаимодействия между проектами
Domain проект не должен зависеть от Application и Infrastructure.
Application может зависеть от Domain для реализации бизнес-сценариев.
Infrastructure зависит от Domain и иногда от Application для реализации репозиториев, служб и других инфраструктурных слоев.
Такое разделение позволяет повысить масштабируемость, тестируемость и гибкость системы, обеспечивая строгое разграничение ответственности каждого уровня.

---

# Различие между бизнес-сценарием и бизнес-логикой в первую очередь связано с уровнем их применения и детализацией в контексте архитектуры приложения и процессов. 

## Бизнес-сценарий
- Что это: Бизнес-сценарий описывает конкретный процесс или последовательность шагов, которые выполняются для достижения определённой бизнес-цели. Это высокоуровневое представление бизнес-деятельности.
- Цель: Координация действий между различными частями системы и определение "что нужно сделать" для выполнения задачи.
- Где используется: Обычно реализуется на уровне приложения (Application Layer).
-Примеры:
	- Обработка заказа:
		1. Проверить наличие товара на складе.
		1. Забронировать товар.
		1. Провести оплату.
		1. Отправить уведомление клиенту.
	- Регистрация пользователя:
		1. Проверить валидность данных.
		1. Создать учетную запись.
		1. Отправить email с подтверждением.
	- Ключевые характеристики:
		1. Включает несколько шагов, которые могут охватывать разные компоненты системы.
		1. Зависит от контекста бизнеса, но абстрагирован от технических деталей.
		1. Описывает последовательность действий.

## Бизнес-логика
- Что это: Бизнес-логика — это набор правил, ограничений и поведения, которые определяют, как должна работать система в соответствии с бизнес-требованиями.
- Цель: Реализация правил, которые отражают специфику бизнеса и обеспечивают выполнение его задач.
- Где используется: Реализуется в основном на уровне домена (Domain Layer).
- Примеры:
	1. Если пользователь покупает более 5 единиц товара, предоставляется скидка 10%.
	1. Нельзя отменить заказ, если он уже отправлен.
	1. Налог на товар зависит от региона покупателя.
-Ключевые характеристики:
	1. Фокусируется на правилах и поведении, определённых в рамках предметной области.
	1. Чётко определяет, что можно и что нельзя делать.
Не включает детали о том, как и где правило применяется (это забота бизнес-сценариев).

## Сравнение


| Критерий | Бизнес-сценарий | Бизнес-логика |
| --- | --- | --- |
| Уровень абстракции | Высокий уровень (что нужно сделать).	 | Низкий уровень (как это сделать). | 
| Фокус	 | Последовательность действий. | Правила и ограничения. | 
| Расположение	 | Application Layer.	 | Domain Layer. | 
| Пример	 | "Обработать заказ".	 | "Скидка предоставляется при покупке > 5 ед." | 
| Реализация	 | Использует несколько компонентов.	 | Определяется через сущности, агрегаты и события. | 


## Пример различия на практике:

- Задача: обработать заказ.
	1. Бизнес-сценарий:
		- Проверить, что заказ действителен.
		- Забронировать товар.
		- Снять оплату.
		- Уведомить клиента.
	1. Бизнес-логика:
		- Заказ недействителен, если товары отсутствуют на складе.
		- Покупка невозможна без оплаты.
		- Нельзя бронировать товар больше, чем его есть в наличии.


Таким образом, бизнес-сценарий объединяет действия, используя реализацию бизнес-логики для их выполнения.

### Use Case

- Что это: Use case описывает конкретное взаимодействие между пользователем (или другой системой) и системой. Это описание одного конкретного пути, который система должна поддерживать.
- Цель: Понять, как пользователь или система взаимодействуют для достижения конкретной цели. Узкейсы служат основой для проектирования, тестирования и документирования системы.
- Где используется: Use cases чаще всего применяются на уровне приложения (Application Layer), как и бизнес-сценарии, но с большим акцентом на взаимодействие пользователя.

Отличие Use Case от бизнес-сценария

 | Критерий	 | Use Case	 | Бизнес-сценарий | 
 | --- | --- | --- |
 | Цель | 	Описывает конкретное взаимодействие с системой. | 	Описывает общий процесс или поток операций. | 
 | Фокус | 	На пользователе или внешней системе.	 | На бизнес-операциях. | 
 | Уровень детализации	 | Более детализирован. | 	Высокоуровневый. | 
 | Пример	 | "Клиент оформляет заказ через веб-интерфейс". | 	"Обработка заказа". | 



---

## Пример взаимодействия Use Case, бизнес-сценария и бизнес-логики
- Сценарий: "Обработка заказа" 📦
	- Use Case: "Оформить заказ через веб-сайт" 💻.
		- Акторы: 
			- Rлиент 👤.
# В контексте DDD (Domain-Driven Design) на C# проекты обычно делят на три ключевые части: Application, Infrastructure, и Domain. Вот краткое описание каждого из них и примеры их содержания:

## 1. Domain (Доменный уровень) 💼

Это сердце приложения, где хранится логика, отражающая предметную область. Сюда относятся все основные правила и поведение, которые важны для бизнеса. Проект Domain независим от других частей и должен избегать зависимостей от внешних библиотек (кроме базовых, если они не затрагивают бизнес-логику).

### Содержание Domain проекта:

- Сущности (Entities): классы, которые описывают основные объекты с бизнес-логикой (например, Order, Customer). У них есть идентификаторы и они часто включают методы для выполнения действий.
- Значимые объекты (Value Objects): объекты, которые равны, если их свойства равны (например, Money, Address). Они неизменяемы и обычно содержат только данные и методы для работы с ними.
- Агрегаты (Aggregates) и Корни агрегатов (Aggregate Roots): агрегаты группируют связанные объекты, а корень агрегата контролирует доступ к ним (например, Order может быть корнем агрегата, а OrderItem — его частью).
- Сервисы домена (Domain Services): логика, которая не привязана к конкретной сущности (например, PaymentService).
- Интерфейсы репозиториев (Repository Interfaces): абстракции для доступа к данным. Например, IOrderRepository для управления объектами Order.
- События домена (Domain Events): события, которые происходят в домене (например, OrderPlaced, ProductStockUpdated), позволяя другим компонентам реагировать на изменения.

---

## 2. Application (Уровень приложения) 🖥️

Этот слой координирует взаимодействие между Domain и Infrastructure и управляет потоком данных между ними. Здесь реализуются сценарии бизнес-процессов, но не сама бизнес-логика.

### Содержание Application проекта:

- Сервисы приложения (Application Services): основные службы, которые содержат бизнес-логику на уровне приложения и координируют операции (например, OrderService для обработки заказов).
- Команды и запросы (Commands и Queries): реализация паттернов CQRS (Command and Query Responsibility Segregation), например, CreateOrderCommand и GetCustomerDetailsQuery.
- Обработчики команд и запросов (Command Handlers и Query Handlers): обработчики для выполнения команд и запросов. Например, CreateOrderCommandHandler реализует логику создания заказа.
- Объекты DTO (Data Transfer Objects): объекты для передачи данных между слоями. Эти объекты используют для того, чтобы предоставить данные в ответах, не раскрывая внутреннюю структуру домена.
- Уведомления и взаимодействие с событиями (Event Handlers): обработчики событий для синхронизации других сервисов или доменов.

---

## 3. Infrastructure (Инфраструктурный уровень) 🏗️
Здесь содержатся реализации, необходимые для работы приложения, но не связанные напрямую с его бизнес-логикой. Этот слой отвечает за доступ к данным, внешние интеграции и другие инфраструктурные задачи.

### Содержание Infrastructure проекта:

- Реализации репозиториев (Repository Implementations): классы, которые реализуют доступ к данным (например, OrderRepository), часто взаимодействующие с базами данных через ORM, например, Entity Framework.
- Мапперы и преобразования (Mapping и Conversion): инструменты для преобразования сущностей домена в модели данных для базы данных или DTO и обратно.
- Сервисы для внешних интеграций: реализация внешних API, например, для платежных систем, отправки уведомлений и т. д.
- Управление событиями и шина событий (Event Bus): управление событиями приложения, включая механизмы публикации и подписки.
- Настройки и конфигурации: объекты для конфигурации, параметры для доступа к внешним системам и инфраструктурные настройки.

### Схема взаимодействия между проектами
- Domain проект не должен зависеть от Application и Infrastructure.
- Application может зависеть от Domain для реализации бизнес-сценариев.
- Infrastructure зависит от Domain и иногда от Application для реализации репозиториев, служб и других инфраструктурных слоев.

Такое разделение позволяет повысить масштабируемость, тестируемость и гибкость системы, обеспечивая строгое разграничение ответственности каждого уровня.

---

# Различие между бизнес-сценарием и бизнес-логикой в первую очередь связано с уровнем их применения и детализацией в контексте архитектуры приложения и процессов. 

## Бизнес-сценарий 📋
- Что это: Бизнес-сценарий описывает конкретный процесс или последовательность шагов, которые выполняются для достижения определённой бизнес-цели. Это высокоуровневое представление бизнес-деятельности.
- Цель: Координация действий между различными частями системы и определение "что нужно сделать" для выполнения задачи.
- Где используется: Обычно реализуется на уровне приложения (Application Layer).
- Примеры:
	- Обработка заказа:
		1. Проверить наличие товара на складе.
		1. Забронировать товар.
		1. Провести оплату.
		1. Отправить уведомление клиенту.
	- Регистрация пользователя:
		1. Проверить валидность данных.
		1. Создать учетную запись.
		1. Отправить email с подтверждением.
	- Ключевые характеристики:
		1. Включает несколько шагов, которые могут охватывать разные компоненты системы.
		1. Зависит от контекста бизнеса, но абстрагирован от технических деталей.
		1. Описывает последовательность действий.

## Бизнес-логика 📜
- Что это: Бизнес-логика — это набор правил, ограничений и поведения, которые определяют, как должна работать система в соответствии с бизнес-требованиями.
- Цель: Реализация правил, которые отражают специфику бизнеса и обеспечивают выполнение его задач.
- Где используется: Реализуется в основном на уровне домена (Domain Layer).
- Примеры:
	1. Если пользователь покупает более 5 единиц товара, предоставляется скидка 10%.
	1. Нельзя отменить заказ, если он уже отправлен.
	1. Налог на товар зависит от региона покупателя.
- Ключевые характеристики:
	1. Фокусируется на правилах и поведении, определённых в рамках предметной области.
	1. Чётко определяет, что можно и что нельзя делать.
	1. Не включает детали о том, как и где правило применяется (это забота бизнес-сценариев).

## Сравнение

| Критерий | Бизнес-сценарий 📋 | Бизнес-логика 📜 |
| --- | --- | --- |
| Уровень абстракции | Высокий уровень (что нужно сделать).	 | Низкий уровень (как это сделать). | 
| Фокус	 | Последовательность действий. | Правила и ограничения. | 
| Расположение	 | Application Layer.	 | Domain Layer. | 
| Пример	 | "Обработать заказ".	 | "Скидка предоставляется при покупке > 5 ед." | 
| Реализация	 | Использует несколько компонентов.	 | Определяется через сущности, агрегаты и события. | 

## Пример различия на практике:

- Задача: обработать заказ.
	1. Бизнес-сценарий:
		- Проверить, что заказ действителен.
		- Забронировать товар.
		- Снять оплату.
		- Уведомить клиента.
	1. Бизнес-логика:
		- Заказ недействителен, если товары отсутствуют на складе.
		- Покупка невозможна без оплаты.
		- Нельзя бронировать товар больше, чем его есть в наличии.

Таким образом, бизнес-сценарий объединяет действия, используя реализацию бизнес-логики для их выполнения.


### Use Case 📚
- Что это: 
	- Use case описывает конкретное взаимодействие между пользователем (или другой системой) и системой. Это описание одного конкретного пути, который система должна поддерживать.
- Цель:
	- Понять, как пользователь или система взаимодействуют для достижения конкретной цели. Узкейсы служат основой для проектирования, тестирования и документирования системы.
- Где используется:
	- Use cases чаще всего применяются на уровне приложения (Application Layer), как и бизнес-сценарии, но с большим акцентом на взаимодействие пользователя.

Отличие Use Case от бизнес-сценария

| Критерий	 | Use Case 📚	 | Бизнес-сценарий 📋 | 
| --- | --- | --- |
| Цель | 	Описывает конкретное взаимодействие с системой. | 	Описывает общий процесс или поток операций. | 
| Фокус | 	На пользователе или внешней системе.	 | На бизнес-операциях. | 
| Уровень детализации	 | Более детализирован. | 	Высокоуровневый. | 
| Пример	 | "Клиент оформляет заказ через веб-интерфейс". | 	"Обработка заказа". | 

## Пример взаимодействия Use Case, бизнес-сценария и бизнес-логики
- Сценарий: "Обработка заказа" 📦
	- Use Case: "Оформить заказ через веб-сайт" 💻.
		- Акторы:
			- Клиент 👤.
		- Основной сценарий:
			1. Клиент выбирает товары и добавляет их в корзину 🛒.
			1. Клиент заполняет данные для доставки 📝.
			1. Система проверяет валидность данных ✅.
			1. Клиент подтверждает заказ и производит оплату 💳.
			1. Система формирует заказ 📄.
	- Бизнес-сценарий: 
		- "Обработка заказа" (включает взаимодействие с системой склада 🏢, платёжной системой 💰 и уведомлениями 📧).

	- Бизнес-логика:
		1. "Товары должны быть в наличии" 🏷️.
		1. "Заказ недействителен без оплаты" ❌.
		1. "Нельзя оформить заказ на сумму меньше минимальной" 🚫.
		- Основной сценарий:
			1. Клиент выбирает товары и добавляет их в корзину 🛒.
			1. Клиент заполняет данные для доставки 📝.
			1. Система проверяет валидность данных ✅.
			1. Клиент подтверждает заказ и производит оплату 💳.
			1. Система формирует заказ 📄.
	- Бизнес-сценарий: 
		- "Обработка заказа" (включает взаимодействие с системой склада 🏢, платёжной системой 💰 и уведомлениями 📧).

	- Бизнес-логика:
		1. "Товары должны быть в наличии" 🏷️.
		1. "Заказ недействителен без оплаты" ❌.
		1. "Нельзя оформить заказ на сумму меньше минимальной" 🚫.
